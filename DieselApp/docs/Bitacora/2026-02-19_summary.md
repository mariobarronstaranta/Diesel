# Bitácora de Actividades - 19 de Febrero de 2026

## Resumen Ejecutivo

Se realizó la homologación de tipografía en el modal de detalle del Reporte de Consumos para mantener la consistencia visual con el resto de la aplicación, específicamente con el Reporte de Lecturas. Además, se analizó y diseñó la base de datos (Query SQL) y la documentación técnica de componentes requerida para el nuevo Reporte de Rendimientos.

## Tareas Completadas

### 1. Homologación de Fuentes (Consumos)

- **Diagnóstico:** El modal de detalle en `ReporteConsumosDetalleModal.tsx` utilizaba la clase `font-monospace` para los valores numéricos, lo cual rompía la consistencia visual con otros reportes (como el de Lecturas) que utilizan la fuente estándar de la aplicación.
- **Solución:** Eliminación de las clases `font-monospace` en las tablas de "Salidas" y "Entradas".
- **Resultado:** Tipografía uniforme en todos los reportes del sistema, mejorando la coherencia visual.

### 2. Implementación - Reporte de Rendimientos

- **Requerimiento:** Nuevo reporte para analizar el rendimiento de diésel (Kms/Lts y Hrs/Lts) por unidad, basado en odómetro y horómetro registrados en los movimientos de salida (`TipoMovimiento = 'S'`).
- **Decisión de diseño:** Se eliminó la columna **Fecha** del resultado para mostrar totales acumulados por Tanque/Unidad en el rango de fechas seleccionado (en lugar de un desglose diario).
- **Backend (SQL):**
  - Script creado en `docs/Scripts/Rendimientos.sql`.
  - Función `public.reporte_rendimientos(p_fecha_inicio, p_fecha_fin, p_cve_ciudad, p_id_tanque)`.
  - Parámetros de fecha obligatorios y al inicio (igual que `get_reporte_consumos`). Ciudad como `text`. División protegida con `NULLIF` para evitar división entre cero.
- **Frontend:**
  - Tipos creados en `src/types/reportes.types.ts` (`ReporteRendimientosData`, `ReporteRendimientosForm`).
  - Componente `src/components/ReporteRendimientos.tsx` con filtros, tabla de resultados y exportación CSV.
  - Ruta `/reportes/rendimiento` registrada en `src/App.tsx`.
  - Entrada **Rendimiento** añadida al menú desplegable de Reportes en `src/components/TopNav.tsx`.
- **Documentación:** `docs/components/ReporteRendimientos.md` y `docs/Backlog/2026-02-19_Reporte_Rendimientos.md` actualizados.
- **Pendiente:** Ejecutar el script SQL en Supabase y validar datos de Odómetro/Horómetro en producción.

## Módulos Actualizados

- `ReporteConsumosDetalleModal.tsx` — homologación de fuentes
- `src/components/ReporteRendimientos.tsx` — nuevo componente (creado)
- `src/App.tsx` — ruta `/reportes/rendimiento` agregada
- `src/components/TopNav.tsx` — entrada Rendimiento en menú Reportes
- `src/types/reportes.types.ts` — interfaces de Rendimientos añadidas
- `docs/Scripts/Rendimientos.sql` — función SQL (creada)
- `docs/components/ReporteRendimientos.md` — documentación técnica (creada)

## Estado Final

La aplicación mantiene tipografía homogénea en todos sus reportes y cuenta con el **Reporte de Rendimientos** completamente implementado en frontend y documentado. Pendiente únicamente la ejecución del script SQL en Supabase.
